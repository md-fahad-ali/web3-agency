import{T as Ve,w as Se,a as We,v as Ue}from"./vue.runtime.esm-bundler-Cd9p_aRy.js";import{q as Ee,u as Ce,t as Ie,_ as R,v as ye,w as ce,x as we,M as Oe,y as de,z as Le,A as Ae,B as je,C as Fe,D as Re,S as qe,E as ze,F as Me,G as He,H as Ze,I as Ge,J as Pe,K as Ke,V as Ne,L as Ye}from"./index.Cj-cXQgu.entry.js";import{u as Je,a as Qe,b as Xe,c as et}from"./index-CxZLNt91.js";import{storeToRefs as ve}from"./pinia.DAwsc5Rz.entry.js";import{useI18n as ae}from"./vue-i18n.B3qvgDw3.entry.js";import{useRouter as Be}from"./vue-router.DxBnJlSm.entry.js";import{d as q,c as k,e as S,bj as $e,w as ne,b5 as v,b6 as J,by as A,aY as s,ad as b,bw as a,af as x,I as oe,y as i,ae as I,ag as C,aN as j,b7 as De,u,ak as F,bf as T,b3 as se,aF as tt,b4 as Y,aM as nt,n as ot,p as st,ai as at,aO as it,ax as lt,a$ as rt,aZ as ct}from"./runtime-core.esm-bundler-CTKQ3poU.js";const ut=["src"],dt=q({__name:"module-bar-logo",setup(l){const{t:e}=ae(),o=Ee(),r=Ce(),n=k(()=>{var d;return r.settings===null||!((d=r.settings)!=null&&d.project_logo)?null:Ie(`${r.settings.project_logo}`)}),t=S(!1),{queueHasItems:_}=$e(o);ne(()=>_.value,d=>{d&&(t.value=!0)});const m=k(()=>{var d;return(d=r.settings)==null?void 0:d.project_url}),h=k(()=>{var d;return(d=r.settings)!=null&&d.project_url?e("view_project"):!1});function p(){_.value===!1&&(t.value=!1)}return(d,$)=>{const y=v("v-progress-linear"),V=J("tooltip");return A((s(),b(De(m.value?"a":"div"),{href:m.value,target:m.value?"_blank":void 0,rel:m.value?"noopener noreferrer":void 0,class:j(["module-bar-logo",{loading:t.value}])},{default:a(()=>[n.value?(s(),x(oe,{key:0},[i(Ve,{name:"fade"},{default:a(()=>[t.value?(s(),b(y,{key:0,indeterminate:"",rounded:"",onAnimationiteration:p})):I("",!0)]),_:1}),C("img",{class:"custom-logo",src:n.value,alt:"Project Logo"},null,8,ut)],64)):(s(),x("div",{key:1,class:j(["logo",{running:t.value}]),onAnimationiteration:p},null,34))]),_:1},8,["href","target","rel","class"])),[[V,h.value,void 0,{right:!0}]])}}}),vt=R(dt,[["__scopeId","data-v-d86ce83c"]]),_t={class:"module-bar-avatar"},mt=["src","alt"],pt=q({__name:"module-bar-avatar",setup(l){const{t:e}=ae(),o=ye(),r=ce(),{notificationsDrawerOpen:n}=ve(o),{unread:t}=ve(r),_=we(),m=S(!1),h=k(()=>{var V;return!_.currentUser||!("avatar"in _.currentUser)||!((V=_.currentUser)!=null&&V.avatar)?null:Ie(`${_.currentUser.avatar.id}?key=system-medium-cover`)}),p=S(null),d=k(()=>`/users/${_.currentUser.id}`),$=k(()=>"/logout"),y=_.fullName??void 0;return(V,g)=>{const M=v("v-icon"),E=v("v-button"),O=v("v-badge"),Z=v("v-card-title"),Q=v("v-card-actions"),X=v("v-card"),ee=v("v-dialog"),G=v("v-avatar"),ie=v("router-link"),P=v("v-hover"),te=J("tooltip");return s(),x("div",_t,[i(O,{value:u(t),disabled:u(t)==0,class:"notifications-badge"},{default:a(()=>[A((s(),b(E,{tile:"",icon:"","x-large":"",class:"notifications",onClick:g[0]||(g[0]=H=>n.value=!0)},{default:a(()=>[i(M,{name:"notifications"})]),_:1})),[[te,u(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),i(P,null,{default:a(({hover:H})=>[i(ee,{modelValue:m.value,"onUpdate:modelValue":g[2]||(g[2]=U=>m.value=U),onEsc:g[3]||(g[3]=U=>m.value=!1)},{activator:a(({on:U})=>[i(Ve,{name:"sign-out"},{default:a(()=>[H?A((s(),b(E,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:U},{default:a(()=>[i(M,{name:"logout"})]),_:2},1032,["onClick"])),[[te,u(e)("sign_out"),void 0,{right:!0}]]):I("",!0)]),_:2},1024)]),default:a(()=>[i(X,null,{default:a(()=>[i(Z,null,{default:a(()=>[F(T(u(e)("sign_out_confirm")),1)]),_:1}),i(Q,null,{default:a(()=>[i(E,{secondary:"",onClick:g[1]||(g[1]=U=>m.value=!m.value)},{default:a(()=>[F(T(u(e)("cancel")),1)]),_:1}),i(E,{to:$.value},{default:a(()=>[F(T(u(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),i(ie,{to:d.value},{default:a(()=>[A((s(),b(G,{tile:"",large:"",class:j({"no-avatar":!h.value})},{default:a(()=>[h.value&&!p.value?(s(),x("img",{key:0,src:h.value,alt:u(y),class:"avatar-image",onError:g[4]||(g[4]=U=>p.value=U)},null,40,mt)):(s(),b(M,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[te,u(y),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),ft=R(pt,[["__scopeId","data-v-f9f544dc"]]),ht={class:"module-bar"},gt={class:"modules"},bt=q({__name:"module-bar",setup(l){const e=Ce(),{modules:o}=Ae(),r=k(()=>o.value.map(t=>t.id)),n=k(()=>e.settings?(e.settings.module_bar??Oe).filter(t=>t.type==="link"?!0:t.enabled&&r.value.includes(t.id)).map(t=>{if(t.type==="link"){const m=de.omit(t,["url"]);return t.url.startsWith("/")?m.to=t.url:m.href=t.url,Le(m)}const _=o.value.find(m=>m.id===t.id);return{...t,...o.value.find(m=>m.id===t.id),to:`/${_.id}`}}):[]);return(t,_)=>{const m=v("v-icon"),h=v("v-button"),p=J("tooltip");return s(),x("div",ht,[i(vt),C("div",gt,[(s(!0),x(oe,null,se(n.value,d=>A((s(),b(h,{key:d.id,icon:"","x-large":"",to:d.to,href:d.href,tile:""},{default:a(()=>[i(m,{name:d.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[p,d.name,void 0,{right:!0}]])),128))]),i(ft)])}}}),yt=R(bt,[["__scopeId","data-v-572954c3"]]),wt={class:"notification-dialogs"},kt={target:"_blank",href:"https://github.com/directus/directus/issues/new?template=bug_report.yml"},$t=q({__name:"notification-dialogs",setup(l){const{t:e}=ae(),o=ce(),{isAdmin:r}=we(),n=k(()=>o.dialogs),t=async _=>{_.dismissAction&&await _.dismissAction(),o.remove(_.id)};return(_,m)=>{const h=v("v-card-title"),p=v("v-error"),d=v("v-card-text"),$=v("v-button"),y=v("v-card-actions"),V=v("v-card"),g=v("v-dialog");return s(),x("div",wt,[(s(!0),x(oe,null,se(n.value,M=>(s(),b(g,{key:M.id,"model-value":"",persist:""},{default:a(()=>[i(V,{class:j([M.type])},{default:a(()=>[i(h,null,{default:a(()=>[F(T(M.title),1)]),_:2},1024),M.text||M.error?(s(),b(d,{key:0},{default:a(()=>[F(T(M.text)+" ",1),M.error?(s(),b(p,{key:0,error:M.error},null,8,["error"])):I("",!0)]),_:2},1024)):I("",!0),i(y,null,{default:a(()=>[M.type==="error"&&u(r)&&M.code==="UNKNOWN"?(s(),b($,{key:0,secondary:""},{default:a(()=>[C("a",kt,T(u(e)("report_error")),1)]),_:1})):I("",!0),i($,{onClick:E=>t(M)},{default:a(()=>[F(T(M.dismissText??u(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),St=R($t,[["__scopeId","data-v-e61eabb2"]]),Mt={key:1,class:"content"},Nt=["onClick"],xt={key:0,class:"message"},Vt=q({__name:"notifications-drawer",setup(l){const{t:e}=ae(),o=ye(),r=we(),n=je(),{setUnreadCount:t}=ce(),_=Be(),m=S([]),h=S(["inbox"]),p=S([]),d=S(1),$=S(25),y=S(null),V=S({}),g=S(null);ne(h,(N,W)=>{N[0]!==W[0]&&(d.value=1,m.value=[])}),ne([y,V],()=>{d.value=1});function M(N){m.value.includes(N)?m.value.splice(m.value.indexOf(N),1):m.value.push(N)}function E(N){p.value.includes(N)?p.value.splice(p.value.indexOf(N),1):p.value.push(N)}const{notificationsDrawerOpen:O}=ve(o),Z=k(()=>({_and:[{recipient:{_eq:r.currentUser.id}},{status:{_eq:h.value[0]}},V.value]})),{items:Q,loading:X,getItems:ee,totalPages:G,getItemCount:ie}=Je(S("directus_notifications"),{filter:Z,fields:S(["id","subject","message","collection","item","timestamp"]),sort:S(["-timestamp"]),search:y,limit:$,page:d}),P=k(()=>Q.value.map(N=>{var L;let W;if(N.collection){const B=n.getCollection(N.collection);(L=B==null?void 0:B.meta)!=null&&L.singleton||!N.item?W=Fe(N.collection):W=Re(N.collection,N.item)}else String(N.item).startsWith("/")&&(W=String(N.item));return{...N,to:W}}));async function te(){await Me.patch("/notifications",{query:{recipient:{_eq:r.currentUser.id}},data:{status:"archived"}}),await ie(),await ee(),t(0)}async function H(){await Me.patch("/notifications",{keys:m.value,data:{status:h.value[0]==="inbox"?"archived":"inbox"}}),await ie(),await ee(),m.value=[]}function U(N){_.push(N),O.value=!1}return(N,W)=>{const L=v("v-icon"),B=v("v-button"),ue=v("v-list-item-icon"),_e=v("v-list-item-content"),me=v("v-tab"),pe=v("v-tabs"),fe=v("v-info"),he=v("v-skeleton-loader"),c=v("v-list"),f=v("v-checkbox"),z=v("v-text-overflow"),le=v("v-list-item"),ge=v("v-pagination"),D=v("v-drawer"),re=J("tooltip"),ke=J("md");return s(),b(D,{modelValue:u(O),"onUpdate:modelValue":W[5]||(W[5]=w=>tt(O)?O.value=w:null),icon:"notifications",title:u(e)("notifications"),"sidebar-label":u(e)("folders"),onCancel:W[6]||(W[6]=w=>O.value=!1)},{actions:a(()=>[i(qe,{modelValue:y.value,"onUpdate:modelValue":W[0]||(W[0]=w=>y.value=w),filter:V.value,"onUpdate:filter":W[1]||(W[1]=w=>V.value=w),collection:"directus_notifications"},null,8,["modelValue","filter"]),A((s(),b(B,{icon:"",rounded:"",disabled:m.value.length===0,secondary:"",onClick:H},{default:a(()=>[i(L,{name:h.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[re,h.value[0]==="inbox"?u(e)("archive"):u(e)("unarchive"),void 0,{bottom:!0}]]),h.value[0]==="inbox"?A((s(),b(B,{key:0,icon:"",rounded:"",disabled:P.value.length===0,onClick:te},{default:a(()=>[i(L,{name:"done_all"})]),_:1},8,["disabled"])),[[re,u(e)("archive_all"),void 0,{bottom:!0}]]):I("",!0)]),sidebar:a(()=>[i(pe,{modelValue:h.value,"onUpdate:modelValue":W[2]||(W[2]=w=>h.value=w),vertical:""},{default:a(()=>[i(me,{value:"inbox"},{default:a(()=>[i(ue,null,{default:a(()=>[i(L,{name:"inbox"})]),_:1}),i(_e,null,{default:a(()=>[F(T(u(e)("inbox")),1)]),_:1})]),_:1}),i(me,{value:"archived"},{default:a(()=>[i(ue,null,{default:a(()=>[i(L,{name:"archive"})]),_:1}),i(_e,null,{default:a(()=>[F(T(u(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:a(()=>[!u(X)&&P.value.length===0?(s(),b(fe,{key:0,icon:"notifications",title:u(e)("no_notifications"),center:""},{default:a(()=>[F(T(u(e)("no_notifications_copy")),1)]),_:1},8,["title"])):(s(),x("div",Mt,[u(X)?(s(),b(c,{key:0,class:"notifications"},{default:a(()=>[(s(),x(oe,null,se(10,w=>i(he,{key:w,class:j({dense:u(G)>1})},null,8,["class"])),64))]),_:1})):(s(),b(c,{key:1,class:"notifications"},{default:a(()=>[(s(!0),x(oe,null,se(P.value,w=>(s(),b(le,{key:w.id,block:"",dense:u(G)>1,clickable:!!w.message,onMousedown:W[3]||(W[3]=Se(({target:K})=>g.value=K,["left","self"])),onMouseup:Se(({target:K})=>{K===g.value&&E(w.id),g.value=null},["left","self"])},{default:a(()=>[C("div",{class:"header",onClick:K=>E(w.id)},[i(f,{"model-value":m.value.includes(w.id),"onUpdate:modelValue":K=>M(w.id)},null,8,["model-value","onUpdate:modelValue"]),i(z,{class:"title",highlight:y.value,text:w.subject},null,8,["highlight","text"]),i(ze,{value:w.timestamp,type:"timestamp",relative:""},{default:a(({datetime:K})=>[i(z,{class:"datetime",text:K},null,8,["text"])]),_:2},1032,["value"]),w.to?A((s(),b(L,{key:0,clickable:"",name:"open_in_new",onClick:K=>U(w.to)},null,8,["onClick"])),[[re,u(e)("goto_collection_content")]]):I("",!0),w.message?(s(),b(L,{key:1,clickable:"",name:p.value.includes(w.id)?"expand_less":"expand_more"},null,8,["name"])):I("",!0)],8,Nt),p.value.includes(w.id)&&w.message?A((s(),x("div",xt,null,512)),[[ke,w.message]]):I("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})),u(G)>1?(s(),b(ge,{key:2,modelValue:d.value,"onUpdate:modelValue":W[4]||(W[4]=w=>d.value=w),"total-visible":5,length:u(G)},null,8,["modelValue","length"])):I("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Wt=R(Vt,[["__scopeId","data-v-81248a9d"]]),Ct={key:0,class:"icon"},It={class:"content"},Bt={class:"title selectable"},Dt={key:0,class:"text selectable"},Tt=q({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{},alwaysShowText:{type:Boolean},dismissText:{},dismissIcon:{},dismissAction:{}},setup(l){const e=l,o=ce(),r=async()=>{e.showClose===!0&&(e.dismissAction&&await e.dismissAction(),o.remove(e.id))};return(n,t)=>{const _=v("v-progress-circular"),m=v("v-icon"),h=J("tooltip");return s(),x("div",{class:j(["notification-item",[n.type,{tail:n.tail,dense:n.dense,"show-text":n.alwaysShowText}]]),onClick:r},[n.loading||n.progress||n.icon?(s(),x("div",Ct,[n.loading?(s(),b(_,{key:0,indeterminate:"",small:""})):n.progress?(s(),b(_,{key:1,small:"",value:n.progress},null,8,["value"])):(s(),b(m,{key:2,name:n.icon},null,8,["name"]))])):I("",!0),C("div",It,[C("p",Bt,T(n.title),1),n.text?(s(),x("p",Dt,T(n.text),1)):I("",!0)]),n.showClose?A((s(),b(m,{key:1,name:n.dismissIcon??"close",clickable:"",class:"close",onClick:r},null,8,["name"])),[[h,n.dismissText]]):I("",!0)],2)}}}),Te=R(Tt,[["__scopeId","data-v-efae6d48"]]),Ut=q({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(l){const e=ce(),o=$e(e).queue;return(r,n)=>(s(),b(We,{class:j(["notifications-group",{"sidebar-open":r.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:a(()=>[Y(r.$slots,"default",{},void 0,!0),(s(!0),x(oe,null,se(u(o),(t,_)=>(s(),b(Te,{id:t.id,key:t.id,title:t.title,text:t.text,icon:t.icon,type:t.type,loading:t.loading,progress:t.progress,tail:_===u(o).length-1,dense:r.sidebarOpen===!1,"show-close":t.persist===!0&&t.closeable!==!1,"always-show-text":t.alwaysShowText,"dismiss-icon":t.dismissIcon,"dismiss-text":t.dismissText,"dismiss-action":t.dismissAction},null,8,["id","title","text","icon","type","loading","progress","tail","dense","show-close","always-show-text","dismiss-icon","dismiss-text","dismiss-action"]))),128))]),_:3},8,["class"]))}}),Et=R(Ut,[["__scopeId","data-v-f0dfbda2"]]),Ot={class:"icon"},Lt={key:0,class:"title"},At=q({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(l){const e=ye(),{sidebarOpen:o}=$e(e);return(r,n)=>{const t=v("v-icon");return s(),b(De(r.to?"router-link":"button"),{class:j(["sidebar-button",{active:r.active}]),onClick:n[0]||(n[0]=_=>r.$emit("click",_))},{default:a(()=>[C("div",Ot,[i(t,{name:r.icon},null,8,["name"])]),u(o)?(s(),x("div",Lt,[Y(r.$slots,"default",{},void 0,!0)])):I("",!0)]),_:3},8,["class"])}}}),jt=R(At,[["__scopeId","data-v-3acfa986"]]),Ft={class:"notifications-preview"},Rt={key:0,class:"inline"},qt={class:"padding-box"},zt=q({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(l){const{t:e}=ae(),o=ce(),{lastFour:r}=ve(o);return(n,t)=>{const _=v("router-link"),m=v("transition-expand"),h=J("tooltip");return s(),x("div",Ft,[i(m,{tag:"div"},{default:a(()=>[n.modelValue?(s(),x("div",Rt,[C("div",qt,[i(_,{class:j(["link",{"has-items":u(r).length>0}]),to:"/activity"},{default:a(()=>[F(T(u(e)("show_all_activity")),1)]),_:1},8,["class"]),i(We,{tag:"div",name:"notification",class:"transition"},{default:a(()=>[(s(!0),x(oe,null,se(u(r),p=>(s(),b(Te,nt({key:p.id},p),null,16))),128))]),_:1})])])):I("",!0)]),_:1}),A((s(),b(jt,{active:n.modelValue,class:"toggle",icon:"pending_actions",onClick:t[0]||(t[0]=p=>n.$emit("update:modelValue",!n.modelValue))},{default:a(()=>[F(T(u(e)("activity_log")),1)]),_:1},8,["active"])),[[h,!n.sidebarOpen&&u(e)("activity_log"),void 0,{left:!0}]])])}}}),Ht=R(zt,[["__scopeId","data-v-63e60302"]]),xe=l=>Number.isFinite(l)?l:0;function Zt(l){return{days:Math.trunc(l/864e5),hours:Math.trunc(l/36e5%24),minutes:Math.trunc(l/6e4%60),seconds:Math.trunc(l/1e3%60),milliseconds:Math.trunc(l%1e3),microseconds:Math.trunc(xe(l*1e3)%1e3),nanoseconds:Math.trunc(xe(l*1e6)%1e3)}}function Gt(l){return{days:l/86400000n,hours:l/3600000n%24n,minutes:l/60000n%60n,seconds:l/1000n%60n,milliseconds:l%1000n,microseconds:0n,nanoseconds:0n}}function Pt(l){switch(typeof l){case"number":{if(Number.isFinite(l))return Zt(l);break}case"bigint":return Gt(l)}throw new TypeError("Expected a finite number or bigint")}const Kt=l=>l===0||l===0n,Yt=(l,e)=>e===1||e===1n?l:`${l}s`,Jt=1e-7,Qt=24n*60n*60n*1000n;function be(l,e){const o=typeof l=="bigint";if(!o&&!Number.isFinite(l))throw new TypeError("Expected a finite number or bigint");e={...e},e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let r=[];const n=(p,d)=>{const $=Math.floor(p*10**d+Jt);return(Math.round($)/10**d).toFixed(d)},t=(p,d,$,y)=>{if(!((r.length===0||!e.colonNotation)&&Kt(p)&&!(e.colonNotation&&$==="m"))){if(y=y??String(p),e.colonNotation){const V=y.includes(".")?y.split(".")[0].length:y.length,g=r.length>0?2:1;y="0".repeat(Math.max(0,g-V))+y}else y+=e.verbose?" "+Yt(d,p):$;r.push(y)}},_=Pt(l),m=BigInt(_.days);if(t(m/365n,"year","y"),t(m%365n,"day","d"),t(Number(_.hours),"hour","h"),t(Number(_.minutes),"minute","m"),e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&l<1e3){const p=Number(_.seconds),d=Number(_.milliseconds),$=Number(_.microseconds),y=Number(_.nanoseconds);if(t(p,"second","s"),e.formatSubMilliseconds)t(d,"millisecond","ms"),t($,"microsecond","µs"),t(y,"nanosecond","ns");else{const V=d+$/1e3+y/1e6,g=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,M=V>=1?Math.round(V):Math.ceil(V),E=g?V.toFixed(g):M;t(Number.parseFloat(E),"millisecond","ms",E)}}else{const p=(o?Number(l%Qt):l)/1e3%60,d=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,$=n(p,d),y=e.keepDecimalsOnWholeSeconds?$:$.replace(/\.0+$/,"");t(Number.parseFloat(y),"second","s",y)}if(r.length===0)return"0"+(e.verbose?" milliseconds":"ms");const h=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(r=r.slice(0,Math.max(e.unitCount,1))),r.join(h)}const Xt={class:"latency-indicator"},en=q({__name:"latency-indicator",setup(l){const{t:e}=ae(),o=He(),r=k(()=>{const h=de.sortBy(o.latency,["timestamp"]);return h[h.length-1]}),n=k(()=>{if(!o.latency||o.latency.length===0)return 0;const h=de.sortBy(o.latency,["timestamp"]),p=h.slice(Math.max(h.length-5,0));let d=0;for(const{latency:$}of p)d+=$;return Math.round(d/p.length)}),t=k(()=>n.value<=250?4:n.value>250&&n.value<=500?3:n.value>500&&n.value<=750?2:1),_=k(()=>{switch(t.value){case 4:return`${e("connection_excellent")}
(${be(n.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${be(n.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${be(n.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${be(n.value)} ${e("latency")})`;default:return null}}),m=k(()=>{switch(t.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(h,p)=>{const d=v("v-progress-circular"),$=v("v-icon"),y=J("tooltip");return A((s(),x("div",Xt,[r.value?(s(),b($,{key:1,name:m.value},null,8,["name"])):(s(),b(d,{key:0,indeterminate:""}))])),[[y,_.value,void 0,{bottom:!0,end:!0}]])}}}),tn=R(en,[["__scopeId","data-v-93933dfa"]]),nn={class:"project-info"},on={class:"name-container"},sn=q({__name:"project-info",setup(l){const e=Ze(),o=k(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_name}),r=k(()=>{var n,t;return(t=(n=e.info)==null?void 0:n.project)==null?void 0:t.project_descriptor});return(n,t)=>{const _=v("v-text-overflow");return s(),x("div",nn,[i(tn),C("div",on,[i(_,{placement:"right",class:"name",text:o.value},null,8,["text"]),r.value?(s(),b(_,{key:0,placement:"right",class:"descriptor",text:r.value},null,8,["text"])):I("",!0)])])}}}),an=R(sn,[["__scopeId","data-v-142557c9"]]),ln=q({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(l){const e=l,o=S([]),r=S(!1);return ne(()=>e.sidebarOpen,async n=>{n===!1?o.value=[]:(r.value=!0,await ot(),r.value=!1)}),(n,t)=>{const _=v("v-item-group");return s(),b(_,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=m=>o.value=m),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:r.value},{default:a(()=>[Y(n.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),rn=R(ln,[["__scopeId","data-v-d961026b"]]),cn=l=>(rt("data-v-e89b79df"),l=l(),ct(),l),un={class:"module-nav alt-colors"},dn={class:"module-nav-content"},vn={class:"content-wrapper"},_n={class:"flex-container"},mn=cn(()=>C("div",{class:"spacer"},null,-1)),pn=q({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(l,{emit:e}){var fe,he;const o={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},r=l,n=e,{t}=ae(),_=Be(),m=k(()=>r.title??null),h=Qe(r,"splitView",n),p=S(),d=S(),$=S();let y;const V=()=>{var c;clearTimeout(y),(c=p.value)==null||c.classList.remove("hide-overflow-x")};ne(h,()=>{if(!p.value||!d.value)return;p.value.classList.add("hide-overflow-x","hide-overflow-y"),y=setTimeout(V,1500);let c,f;const z=()=>{var le;clearTimeout(c),f==null||f(),(le=p.value)==null||le.classList.remove("hide-overflow-y")};c=setTimeout(z,1500),f=Ge(d.value,"transitionend",z)});const{width:g}=Pe(),{width:M}=Xe($),E=k(()=>{if(!h.value)return!0;let c;return g.value>=1260?c=g.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-M.value:g.value>=960?c=g.value-o.moduleBarWidth-o.minModuleNavWidth-o.minContentWidth-o.collapsedSidebarWidth:c=g.value-o.minContentWidth,c>=r.splitViewMinWidth}),{data:O}=Ke("module-width",{}),Z=S(pe((fe=O.value)==null?void 0:fe.nav,o.minModuleNavWidth));ne(Z,de.debounce(c=>{O.value={...O.value??{},nav:c}},300));const Q=S(pe((he=O.value)==null?void 0:he.main,o.minContentWidth));ne(Q,de.debounce(c=>{O.value={...O.value??{},main:c}},300));const X=S(!1),ee=k(()=>{const c=h.value?r.splitViewMinWidth:0,f=E.value?o.minContentWidth+c:o.minContentWidth;let z;return g.value>=1260?z=g.value-o.moduleBarWidth-f-M.value:g.value>=960?z=g.value-o.moduleBarWidth-f-o.collapsedSidebarWidth:z=g.value-o.moduleBarWidth+o.overlaySpace,Math.max(z,o.minModuleNavWidth)}),G=k(()=>{const c=h.value?r.splitViewMinWidth:0;let f;return g.value>=1260?f=g.value-o.moduleBarWidth-Z.value-c-M.value:g.value>=960?f=g.value-o.moduleBarWidth-Z.value-c-o.collapsedSidebarWidth:f=g.value-c,Math.max(f,o.minContentWidth)}),ie=k(()=>({snapZones:[{width:40,snapPos:o.minModuleNavWidth,direction:"left"},{width:40,snapPos:ee.value,direction:"right"}]})),P=S(!1),te=k(()=>({snapZones:[{width:40,snapPos:o.minContentWidth,direction:"left"},{width:40,snapPos:G.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:X.value})),H=S(!1),U=we(),N=ye(),W=k(()=>{var c,f;return U.currentUser?((f=(c=U.currentUser)==null?void 0:c.role)==null?void 0:f.app_access)||!1:!0}),L=S(!1),{sidebarOpen:B,fullScreen:ue}=ve(N),_e=k(()=>U.currentUser&&"appearance"in U.currentUser?U.currentUser.appearance:"auto");st("main-element",p),_.afterEach(()=>{var c;(c=p.value)==null||c.scrollTo({top:0}),ue.value=!1}),et({title:m});function me(c){c.target&&c.target.classList.contains("close")===!1&&(B.value=!0)}function pe(c,f){return c&&!Number.isNaN(c)?Number(c):f}return(c,f)=>{const z=v("v-button"),le=v("v-info"),ge=v("v-overlay");return W.value===!1?(s(),b(le,{key:0,center:"",title:u(t)("no_app_access"),type:"danger",icon:"block"},{append:a(()=>[i(z,{to:"/logout"},{default:a(()=>[F(T(u(t)("switch_user")),1)]),_:1})]),default:a(()=>[F(T(u(t)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(s(),x("div",{key:1,class:j(["private-view",{appearance:_e.value,"full-screen":u(ue),splitView:c.splitView}])},[C("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:j({"is-open":H.value,"has-shadow":c.sidebarShadow})},[i(yt),i(Ne,{width:Z.value,"onUpdate:width":f[0]||(f[0]=D=>Z.value=D),"min-width":o.minModuleNavWidth,"max-width":ee.value,options:ie.value,onDragging:f[1]||(f[1]=D=>X.value=D),onTransitionEnd:V},{default:a(()=>[C("div",un,[i(an),C("div",dn,[Y(c.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),C("div",{id:"main-content",ref_key:"contentEl",ref:p,class:"content"},[i(Ye,{ref_key:"headerBarEl",ref:d,small:c.smallHeader||c.splitView,shadow:c.headerShadow||c.splitView,"show-sidebar-toggle":"",title:c.title,"onToggle:sidebar":f[2]||(f[2]=D=>B.value=!u(B)),onPrimary:f[3]||(f[3]=D=>H.value=!H.value)},at({_:2},[se(c.$slots,(D,re)=>({name:re,fn:a(ke=>[Y(c.$slots,re,it(lt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),C("div",vn,[i(Ne,{width:Q.value,"onUpdate:width":f[4]||(f[4]=D=>Q.value=D),"min-width":o.minContentWidth,"max-width":G.value,disabled:!u(h),options:te.value,onDragging:f[5]||(f[5]=D=>P.value=D)},{default:a(()=>[A(C("main",null,[Y(c.$slots,"default",{},void 0,!0)],512),[[Ue,E.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),c.splitView?(s(),x("div",{key:0,id:"split-content",class:j({"is-dragging":P.value})},[Y(c.$slots,"splitView",{},void 0,!0)],2)):I("",!0)])],512),C("aside",{id:"sidebar",ref_key:"sidebarEl",ref:$,role:"contentinfo",class:j(["alt-colors",{"is-open":u(B),"has-shadow":c.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:me},[C("div",_n,[i(rn,{"sidebar-open":u(B)},{default:a(()=>[Y(c.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),mn,i(Ht,{modelValue:L.value,"onUpdate:modelValue":f[6]||(f[6]=D=>L.value=D),"sidebar-open":u(B)},null,8,["modelValue","sidebar-open"])])],2),i(ge,{class:"nav-overlay",active:H.value,onClick:f[7]||(f[7]=D=>H.value=!1)},null,8,["active"]),i(ge,{class:"sidebar-overlay",active:u(B),onClick:f[8]||(f[8]=D=>B.value=!1)},null,8,["active"]),i(Wt),L.value===!1?(s(),b(Et,{key:0,"sidebar-open":u(B)},null,8,["sidebar-open"])):I("",!0),i(St)],2))}}}),$n=R(pn,[["__scopeId","data-v-e89b79df"]]);export{$n as PrivateView,$n as default};
